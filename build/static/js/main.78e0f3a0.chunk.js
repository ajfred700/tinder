(this["webpackJsonpreact-firestore-crud"]=this["webpackJsonpreact-firestore-crud"]||[]).push([[0],{66:function(e,t,n){},67:function(e,t,n){},74:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var a=n(2),i=n.n(a),s=n(27),c=n.n(s),r=n(31),o=n(44),l=n(28),u=n(29),d=n(42),b=n(41),h=(n(65),n(66),n(67),n(55)),j=n.n(h),m=n(100),p=n(54),f=n.n(p),O=n(10),g=n(5);var v=function(e){var t=e.backButton,n=Object(O.f)();return Object(g.jsxs)("div",{className:"header",children:[t?Object(g.jsx)(m.a,{onClick:function(){return n.replace(t)},children:Object(g.jsx)(f.a,{fontSize:"large"})}):Object(g.jsx)(m.a,{children:Object(g.jsx)(j.a,{fontSize:"large",onClick:function(){return n.push("/add-person")}})}),Object(g.jsx)(r.b,{to:"/",children:Object(g.jsx)("img",{src:"https://lh3.googleusercontent.com/proxy/Z9Otutru6LfoEWtXaTpqLN1S3Z0BIfAmAdFO0XW9Mi3hBehbM8a_zs85ELFvkbBN2cUSRCxh6qYMNDPR2-6VCLee4mJytepBO_XiNj2fj2g3TIe0UHlh8mXwaA",alt:"tinder logo",className:"header__logo"})})]})},x=n(58),k=(n(74),n(56)),y=n.n(k),C=(n(79),n(26));n(83);C.a.initializeApp({apiKey:"AIzaSyBrwXbkf9YLSwOTPcKbbOt4QipSUvrKYh4",authDomain:"tin1-a8799.firebaseapp.com",databaseURL:"https://tin1-a8799-default-rtdb.firebaseio.com",projectId:"tin1-a8799",storageBucket:"tin1-a8799.appspot.com",messagingSenderId:"119629352260",appId:"1:119629352260:web:49bd6e49fbaa5891491b11",measurementId:"G-P59BZ119T3"});var w=C.a.firestore(),S=C.a.storage(),T=C.a.firestore();var N=function(){var e=Object(a.useState)([]),t=Object(x.a)(e,2),n=t[0],i=t[1];return Object(a.useEffect)((function(){var e=w.collection("people").orderBy("timestamp","asc").onSnapshot((function(e){i(e.docs.map((function(e){return e.data()})))}));return function(){return e()}}),[]),console.log("component render"),Object(g.jsx)("div",{children:Object(g.jsx)("div",{className:"tinderCards__cardContainer",children:n.map((function(e,t){return Object(g.jsx)(y.a,{className:"swipe",preventSwipe:["up","down"],children:Object(g.jsx)("div",{className:"card",style:{backgroundImage:"url(".concat(e.url,")")},children:Object(g.jsx)("h3",{children:(n=e.name,n.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" "))})})},t);var n}))})})},A=n(33),B=n(21),I=T.collection("/people"),U=new(function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,[{key:"getAll",value:function(){return I}},{key:"create",value:function(e){return I.add(e)}},{key:"update",value:function(e,t){return I.doc(e).update(t)}},{key:"delete",value:function(e){return I.doc(e).delete()}}]),e}()),D=function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(e){var a,i;return Object(l.a)(this,n),(i=t.call(this,e)).onChangeTitle=i.onChangeTitle.bind(Object(B.a)(i)),i.onChangeDescription=i.onChangeDescription.bind(Object(B.a)(i)),i.saveTutorial=i.saveTutorial.bind(Object(B.a)(i)),i.newTutorial=i.newTutorial.bind(Object(B.a)(i)),i.handleChange=i.handleChange.bind(Object(B.a)(i)),i.handleUpload=i.handleUpload.bind(Object(B.a)(i)),i.state=(a={name:"",description:"",published:!1,submitted:!1,file:""},Object(A.a)(a,"name",""),Object(A.a)(a,"url",""),Object(A.a)(a,"timestamp",C.a.firestore.FieldValue.serverTimestamp()),a),i}return Object(u.a)(n,[{key:"onChangeTitle",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"saveTutorial",value:function(){var e=this,t=Date.now();console.log(new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(t));var n={timestamp:this.state.timestamp,name:this.state.name,description:this.state.description,published:!1,url:this.state.url};U.create(n).then((function(){console.log("Created new item successfully!"),e.setState({submitted:!0})})).catch((function(e){console.log(e)}))}},{key:"newTutorial",value:function(){this.setState({name:"",description:"",published:!1,timestamp:C.a.firestore.FieldValue.serverTimestamp(),submitted:!1})}},{key:"handleChange",value:function(e){alert("e: "+e.target.files[0]),alert("e: "+e.target.files[0].name),this.setState({file:e.target.files[0],name:e.target.files[0].name})}},{key:"handleUpload",value:function(e){var t=this,n=this.state.name;alert("uploading..."+n),e.preventDefault(),S.ref("/images/".concat(this.state.name)).put(this.state.file).on("state_changed",console.log,console.error,(function(){S.ref("images").child(t.state.name).getDownloadURL().then((function(e){t.setState({url:e})}))}))}},{key:"render",value:function(){return Object(g.jsxs)("div",{className:"submit-form",children:[this.state.submitted?Object(g.jsxs)("div",{children:[Object(g.jsx)("h4",{children:"You submitted successfully!"}),Object(g.jsx)("button",{className:"btn btn-success",onClick:this.newTutorial,children:"Add"})]}):Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"form-group",children:"Aqu\xed podras subir tus imagenes"}),Object(g.jsxs)("div",{className:"form-group",children:[Object(g.jsx)("label",{htmlFor:"title",children:"Nombre "}),Object(g.jsx)("input",{type:"text",className:"form-control",id:"title",required:!0,value:this.state.name,onChange:this.onChangeTitle,name:"title"})]}),Object(g.jsx)("button",{onClick:this.saveTutorial,className:"btn btn-success",children:"Submit"})]}),Object(g.jsxs)("div",{className:"App",children:[Object(g.jsxs)("form",{onSubmit:this.handleUpload,children:[Object(g.jsx)("input",{type:"file",onChange:this.handleChange}),Object(g.jsx)("button",{children:"upload to firebase"})]}),this.state.url,Object(g.jsx)("img",{src:this.state.url,alt:""})]})]})}}]),n}(a.Component),R=n(57),F=n.n(R),L=function(){console.log("Clicked!")},_=function(e){var t=e.facebookResponse;return Object(g.jsx)(F.a,{appId:"807505486520816",fields:"name,email,picture",onClick:L,callback:t,icon:"fa-facebook"})},z=function(e){e.user;return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{className:"app",children:Object(g.jsx)(r.a,{children:Object(g.jsxs)(O.c,{children:[Object(g.jsxs)(O.a,{path:"/add-person",children:[Object(g.jsx)(v,{}),Object(g.jsx)(D,{})]}),Object(g.jsxs)(O.a,{exact:!0,path:"/",children:[Object(g.jsx)(v,{}),Object(g.jsx)(N,{})]})]})})})})},X=function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={user:!1},e.facebookResponse=function(t){console.log(t),e.setState(Object(o.a)(Object(o.a)({},e.state),{},{user:t}))},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(g.jsx)("div",{children:this.state.user?Object(g.jsx)(z,{user:this.state.user}):Object(g.jsx)(_,{facebookResponse:this.facebookResponse})})}}]),n}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(g.jsx)(r.a,{children:Object(g.jsx)(X,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[85,1,2]]]);
//# sourceMappingURL=main.78e0f3a0.chunk.js.map